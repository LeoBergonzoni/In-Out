"use strict";(self.webpackChunkfinanze_app=self.webpackChunkfinanze_app||[]).push([[498],{2498:(e,t,n)=>{n.r(t),n.d(t,{FirebaseAuthenticationWeb:()=>a});var i=n(5403),r=n(1729),s=n(5682);class a extends i.E_{constructor(){super(),this.lastConfirmationResult=new Map;const e=(0,r.xI)();e.onAuthStateChanged((e=>this.handleAuthStateChange(e))),e.onIdTokenChanged((e=>{this.handleIdTokenChange(e)}))}async applyActionCode(e){const t=(0,r.xI)();return(0,r.sv)(t,e.oobCode)}async createUserWithEmailAndPassword(e){const t=(0,r.xI)(),n=await(0,r.eJ)(t,e.email,e.password);return this.createSignInResult(n,null)}async confirmPasswordReset(e){const t=(0,r.xI)();return(0,r.R4)(t,e.oobCode,e.newPassword)}async confirmVerificationCode(e){const{verificationCode:t,verificationId:n}=e,i=this.lastConfirmationResult.get(n);if(!i)throw new Error(a.ERROR_CONFIRMATION_RESULT_MISSING);const r=await i.confirm(t);return this.createSignInResult(r,null)}async deleteUser(){const e=(0,r.xI)().currentUser;if(!e)throw new Error(a.ERROR_NO_USER_SIGNED_IN);return(0,r.hG)(e)}async fetchSignInMethodsForEmail(e){const t=(0,r.xI)();return{signInMethods:await(0,r.Wm)(t,e.email)}}async getPendingAuthResult(){this.throwNotAvailableError()}async getCurrentUser(){const e=(0,r.xI)();return{user:this.createUserResult(e.currentUser)}}async getIdToken(e){const t=(0,r.xI)();if(!t.currentUser)throw new Error(a.ERROR_NO_USER_SIGNED_IN);return{token:await t.currentUser.getIdToken(null===e||void 0===e?void 0:e.forceRefresh)||""}}async getRedirectResult(){const e=(0,r.xI)(),t=await(0,r.Q4)(e),n=t?r.LD.credentialFromResult(t):null;return this.createSignInResult(t,n)}async getTenantId(){return{tenantId:(0,r.xI)().tenantId}}async isSignInWithEmailLink(e){const t=(0,r.xI)();return{isSignInWithEmailLink:(0,r.Pj)(t,e.emailLink)}}async linkWithApple(e){const t=new r.LD(s.N.APPLE);this.applySignInOptions(e||{},t);const n=await this.linkCurrentUserWithPopupOrRedirect(t,null===e||void 0===e?void 0:e.mode),i=r.LD.credentialFromResult(n);return this.createSignInResult(n,i)}async linkWithEmailAndPassword(e){const t=r.IX.credential(e.email,e.password),n=await this.linkCurrentUserWithCredential(t);return this.createSignInResult(n,t)}async linkWithEmailLink(e){const t=r.IX.credentialWithLink(e.email,e.emailLink),n=await this.linkCurrentUserWithCredential(t);return this.createSignInResult(n,t)}async linkWithFacebook(e){const t=new r.sk;this.applySignInOptions(e||{},t);const n=await this.linkCurrentUserWithPopupOrRedirect(t,null===e||void 0===e?void 0:e.mode),i=r.sk.credentialFromResult(n);return this.createSignInResult(n,i)}async linkWithGameCenter(){this.throwNotAvailableError()}async linkWithGithub(e){const t=new r.Dt;this.applySignInOptions(e||{},t);const n=await this.linkCurrentUserWithPopupOrRedirect(t,null===e||void 0===e?void 0:e.mode),i=r.Dt.credentialFromResult(n);return this.createSignInResult(n,i)}async linkWithGoogle(e){const t=new r.HF;this.applySignInOptions(e||{},t);const n=await this.linkCurrentUserWithPopupOrRedirect(t,null===e||void 0===e?void 0:e.mode),i=r.HF.credentialFromResult(n);return this.createSignInResult(n,i)}async linkWithMicrosoft(e){const t=new r.LD(s.N.MICROSOFT);this.applySignInOptions(e||{},t);const n=await this.linkCurrentUserWithPopupOrRedirect(t,null===e||void 0===e?void 0:e.mode),i=r.LD.credentialFromResult(n);return this.createSignInResult(n,i)}async linkWithOpenIdConnect(e){const t=new r.LD(e.providerId);this.applySignInOptions(e,t);const n=await this.linkCurrentUserWithPopupOrRedirect(t,e.mode),i=r.LD.credentialFromResult(n);return this.createSignInResult(n,i)}async linkWithPhoneNumber(e){const t=(0,r.xI)().currentUser;if(!t)throw new Error(a.ERROR_NO_USER_SIGNED_IN);if(!e.phoneNumber)throw new Error(a.ERROR_PHONE_NUMBER_MISSING);if(!e.recaptchaVerifier||!(e.recaptchaVerifier instanceof r.kT))throw new Error(a.ERROR_RECAPTCHA_VERIFIER_MISSING);try{const n=await(0,r.uL)(t,e.phoneNumber,e.recaptchaVerifier),{verificationId:i}=n;this.lastConfirmationResult.set(i,n);const s={verificationId:i};this.notifyListeners(a.PHONE_CODE_SENT_EVENT,s)}catch(n){const e={message:this.getErrorMessage(n)};this.notifyListeners(a.PHONE_VERIFICATION_FAILED_EVENT,e)}}async linkWithPlayGames(){this.throwNotAvailableError()}async linkWithTwitter(e){const t=new r.ny;this.applySignInOptions(e||{},t);const n=await this.linkCurrentUserWithPopupOrRedirect(t,null===e||void 0===e?void 0:e.mode),i=r.ny.credentialFromResult(n);return this.createSignInResult(n,i)}async linkWithYahoo(e){const t=new r.LD(s.N.YAHOO);this.applySignInOptions(e||{},t);const n=await this.linkCurrentUserWithPopupOrRedirect(t,null===e||void 0===e?void 0:e.mode),i=r.LD.credentialFromResult(n);return this.createSignInResult(n,i)}async reload(){const e=(0,r.xI)().currentUser;if(!e)throw new Error(a.ERROR_NO_USER_SIGNED_IN);return(0,r.yQ)(e)}async revokeAccessToken(e){const t=(0,r.xI)();return(0,r.Kz)(t,e.token)}async sendEmailVerification(e){const t=(0,r.xI)().currentUser;if(!t)throw new Error(a.ERROR_NO_USER_SIGNED_IN);return(0,r.gA)(t,null===e||void 0===e?void 0:e.actionCodeSettings)}async sendPasswordResetEmail(e){const t=(0,r.xI)();return(0,r.J1)(t,e.email,e.actionCodeSettings)}async sendSignInLinkToEmail(e){const t=(0,r.xI)();return(0,r.MN)(t,e.email,e.actionCodeSettings)}async setLanguageCode(e){(0,r.xI)().languageCode=e.languageCode}async setPersistence(e){const t=(0,r.xI)();switch(e.persistence){case s.y.BrowserLocal:await(0,r.oM)(t,r.F0);break;case s.y.BrowserSession:await(0,r.oM)(t,r.iM);break;case s.y.IndexedDbLocal:await(0,r.oM)(t,r.Gt);break;case s.y.InMemory:await(0,r.oM)(t,r.gz)}}async setTenantId(e){(0,r.xI)().tenantId=e.tenantId}async signInAnonymously(){const e=(0,r.xI)(),t=await(0,r.zK)(e);return this.createSignInResult(t,null)}async signInWithApple(e){const t=new r.LD(s.N.APPLE);this.applySignInOptions(e||{},t);const n=await this.signInWithPopupOrRedirect(t,null===e||void 0===e?void 0:e.mode),i=r.LD.credentialFromResult(n);return this.createSignInResult(n,i)}async signInWithCustomToken(e){const t=(0,r.xI)(),n=await(0,r.p)(t,e.token);return this.createSignInResult(n,null)}async signInWithEmailAndPassword(e){const t=(0,r.xI)(),n=await(0,r.x9)(t,e.email,e.password);return this.createSignInResult(n,null)}async signInWithEmailLink(e){const t=(0,r.xI)(),n=await(0,r.hK)(t,e.email,e.emailLink);return this.createSignInResult(n,null)}async signInWithFacebook(e){const t=new r.sk;this.applySignInOptions(e||{},t);const n=await this.signInWithPopupOrRedirect(t,null===e||void 0===e?void 0:e.mode),i=r.sk.credentialFromResult(n);return this.createSignInResult(n,i)}async signInWithGithub(e){const t=new r.Dt;this.applySignInOptions(e||{},t);const n=await this.signInWithPopupOrRedirect(t,null===e||void 0===e?void 0:e.mode),i=r.Dt.credentialFromResult(n);return this.createSignInResult(n,i)}async signInWithGoogle(e){const t=new r.HF;this.applySignInOptions(e||{},t);const n=await this.signInWithPopupOrRedirect(t,null===e||void 0===e?void 0:e.mode),i=r.HF.credentialFromResult(n);return this.createSignInResult(n,i)}async signInWithMicrosoft(e){const t=new r.LD(s.N.MICROSOFT);this.applySignInOptions(e||{},t);const n=await this.signInWithPopupOrRedirect(t,null===e||void 0===e?void 0:e.mode),i=r.LD.credentialFromResult(n);return this.createSignInResult(n,i)}async signInWithOpenIdConnect(e){const t=new r.LD(e.providerId);this.applySignInOptions(e,t);const n=await this.signInWithPopupOrRedirect(t,e.mode),i=r.LD.credentialFromResult(n);return this.createSignInResult(n,i)}async signInWithPhoneNumber(e){if(!e.phoneNumber)throw new Error(a.ERROR_PHONE_NUMBER_MISSING);if(!e.recaptchaVerifier||!(e.recaptchaVerifier instanceof r.kT))throw new Error(a.ERROR_RECAPTCHA_VERIFIER_MISSING);const t=(0,r.xI)();try{const n=await(0,r.ik)(t,e.phoneNumber,e.recaptchaVerifier),{verificationId:i}=n;this.lastConfirmationResult.set(i,n);const s={verificationId:i};this.notifyListeners(a.PHONE_CODE_SENT_EVENT,s)}catch(n){const e={message:this.getErrorMessage(n)};this.notifyListeners(a.PHONE_VERIFICATION_FAILED_EVENT,e)}}async signInWithPlayGames(){this.throwNotAvailableError()}async signInWithGameCenter(){this.throwNotAvailableError()}async signInWithTwitter(e){const t=new r.ny;this.applySignInOptions(e||{},t);const n=await this.signInWithPopupOrRedirect(t,null===e||void 0===e?void 0:e.mode),i=r.ny.credentialFromResult(n);return this.createSignInResult(n,i)}async signInWithYahoo(e){const t=new r.LD(s.N.YAHOO);this.applySignInOptions(e||{},t);const n=await this.signInWithPopupOrRedirect(t,null===e||void 0===e?void 0:e.mode),i=r.LD.credentialFromResult(n);return this.createSignInResult(n,i)}async signOut(){const e=(0,r.xI)();await e.signOut()}async unlink(e){const t=(0,r.xI)();if(!t.currentUser)throw new Error(a.ERROR_NO_USER_SIGNED_IN);const n=await(0,r.y1)(t.currentUser,e.providerId);return{user:this.createUserResult(n)}}async updateEmail(e){const t=(0,r.xI)().currentUser;if(!t)throw new Error(a.ERROR_NO_USER_SIGNED_IN);return(0,r.Ww)(t,e.newEmail)}async updatePassword(e){const t=(0,r.xI)().currentUser;if(!t)throw new Error(a.ERROR_NO_USER_SIGNED_IN);return(0,r.f3)(t,e.newPassword)}async updateProfile(e){const t=(0,r.xI)().currentUser;if(!t)throw new Error(a.ERROR_NO_USER_SIGNED_IN);return(0,r.r7)(t,{displayName:e.displayName,photoURL:e.photoUrl})}async useAppLanguage(){(0,r.xI)().useDeviceLanguage()}async useEmulator(e){const t=(0,r.xI)(),n=e.port||9099,i=e.scheme||"http";e.host.includes("://")?(0,r.Wq)(t,`${e.host}:${n}`):(0,r.Wq)(t,`${i}://${e.host}:${n}`)}async verifyBeforeUpdateEmail(e){const t=(0,r.xI)().currentUser;if(!t)throw new Error(a.ERROR_NO_USER_SIGNED_IN);return(0,r.g0)(t,null===e||void 0===e?void 0:e.newEmail,null===e||void 0===e?void 0:e.actionCodeSettings)}handleAuthStateChange(e){const t={user:this.createUserResult(e)};this.notifyListeners(a.AUTH_STATE_CHANGE_EVENT,t,!0)}async handleIdTokenChange(e){if(!e)return;const t={token:await e.getIdToken(!1)};this.notifyListeners(a.ID_TOKEN_CHANGE_EVENT,t,!0)}applySignInOptions(e,t){if(e.customParameters){const n={};e.customParameters.map((e=>{n[e.key]=e.value})),t.setCustomParameters(n)}if(e.scopes)for(const n of e.scopes)t.addScope(n)}signInWithPopupOrRedirect(e,t){const n=(0,r.xI)();return"redirect"===t?(0,r.$2)(n,e):(0,r.df)(n,e)}linkCurrentUserWithPopupOrRedirect(e,t){const n=(0,r.xI)();if(!n.currentUser)throw new Error(a.ERROR_NO_USER_SIGNED_IN);return"redirect"===t?(0,r.dC)(n.currentUser,e):(0,r.x8)(n.currentUser,e)}linkCurrentUserWithCredential(e){const t=(0,r.xI)();if(!t.currentUser)throw new Error(a.ERROR_NO_USER_SIGNED_IN);return(0,r.OS)(t.currentUser,e)}createSignInResult(e,t){return{user:this.createUserResult((null===e||void 0===e?void 0:e.user)||null),credential:this.createCredentialResult(t),additionalUserInfo:this.createAdditionalUserInfoResult(e)}}createCredentialResult(e){if(!e)return null;const t={providerId:e.providerId};return e instanceof r.RM&&(t.accessToken=e.accessToken,t.idToken=e.idToken,t.secret=e.secret),t}createUserResult(e){if(!e)return null;return{displayName:e.displayName,email:e.email,emailVerified:e.emailVerified,isAnonymous:e.isAnonymous,metadata:this.createUserMetadataResult(e.metadata),phoneNumber:e.phoneNumber,photoUrl:e.photoURL,providerData:this.createUserProviderDataResult(e.providerData),providerId:e.providerId,tenantId:e.tenantId,uid:e.uid}}createUserMetadataResult(e){const t={};return e.creationTime&&(t.creationTime=Date.parse(e.creationTime)),e.lastSignInTime&&(t.lastSignInTime=Date.parse(e.lastSignInTime)),t}createUserProviderDataResult(e){return e.map((e=>({displayName:e.displayName,email:e.email,phoneNumber:e.phoneNumber,photoUrl:e.photoURL,providerId:e.providerId,uid:e.uid})))}createAdditionalUserInfoResult(e){if(!e)return null;const t=(0,r.B8)(e);if(!t)return null;const{isNewUser:n,profile:i,providerId:s,username:a}=t,o={isNewUser:n};return null!==s&&(o.providerId=s),null!==i&&(o.profile=i),null!==a&&void 0!==a&&(o.username=a),o}getErrorMessage(e){return e instanceof Object&&"message"in e&&"string"===typeof e.message?e.message:JSON.stringify(e)}throwNotAvailableError(){throw new Error("Not available on web.")}}a.AUTH_STATE_CHANGE_EVENT="authStateChange",a.ID_TOKEN_CHANGE_EVENT="idTokenChange",a.PHONE_CODE_SENT_EVENT="phoneCodeSent",a.PHONE_VERIFICATION_FAILED_EVENT="phoneVerificationFailed",a.ERROR_NO_USER_SIGNED_IN="No user is signed in.",a.ERROR_PHONE_NUMBER_MISSING="phoneNumber must be provided.",a.ERROR_RECAPTCHA_VERIFIER_MISSING="recaptchaVerifier must be provided and must be an instance of RecaptchaVerifier.",a.ERROR_CONFIRMATION_RESULT_MISSING="No confirmation result with this verification id was found."}}]);
//# sourceMappingURL=498.a265cdbe.chunk.js.map